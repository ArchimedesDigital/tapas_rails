- if current_user_can? :edit, @core_file
  = link_to "Edit", edit_core_file_path(@core_file), class:['btn', 'btn-info', 'btn-large']

%h2.page-header= @core_file.title

%div.tabbable.tabs-left.vertical-tabs.node
  %ul.nav.nav-tabs.vertical-tabs-list
    %li.vertical-tab-button.active
      = link_to "Reader", '#reader'
    %li.vertical-tab-button
      = link_to "Metadata", '#metadata'
    %li.vertical-tab-button
      = link_to "Files", '#files'
    %li.vertical-tab-button
      = link_to "Project Details", '#project_details'

  .tab-content.vertical-tabs-panes
    #reader.tab-pane.active
      = render partial:'view_package_options', locals:{core_file: @core_file, view_packages:@view_packages}
      = render partial:'reading_interface', locals:{core_file:@core_file, view_packages:@view_packages}

    #metadata.tab-pane
      = @mods_html

    #files.tab-pane
      -if @core_file.canonical_object
        %dt TEI File:
        %dd
          %a{href: @core_file.canonical_object.download_path}
            %span.fa.fa-file-code-o
            = @core_file.canonical_object.filename

    #project_details.tab-pane
      -if @core_file.project
        %dt Project:
        %dd= link_to @core_file.project.mods.title.first, community_path(@core_file.project)
      -if @core_file.collections
        %dt Collections:
        -@core_file.collections.each do |c|
          %dd= link_to c.mods.title.first, collection_path(c)
      -#TODO add ography data

:javascript
  $('.nav-tabs a').click(function (e) {
    e.preventDefault();
    $(this).tab('show');
  });

=javascript_include_tag "record"
=javascript_include_tag "ace/ace"
